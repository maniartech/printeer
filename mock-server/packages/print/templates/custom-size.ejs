<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= title %></title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 0;
            background: #f8f9fa;
        }
        
        .page-container {
            background: white;
            min-height: 100vh;
            position: relative;
            border: 3px solid #007bff;
            box-sizing: border-box;
        }
        
        /* Page size indicators */
        .size-indicator {
            position: absolute;
            background: rgba(0, 123, 255, 0.1);
            border: 2px solid #007bff;
            color: #007bff;
            font-weight: bold;
            font-size: 12px;
            padding: 5px 10px;
            border-radius: 4px;
        }
        
        .size-width {
            top: -30px;
            left: 50%;
            transform: translateX(-50%);
        }
        
        .size-height {
            left: -80px;
            top: 50%;
            transform: translateY(-50%) rotate(-90deg);
        }
        
        /* Corner markers */
        .corner-marker {
            position: absolute;
            width: 20px;
            height: 20px;
            border: 2px solid #dc3545;
            background: rgba(220, 53, 69, 0.1);
        }
        
        .corner-tl { top: 0; left: 0; border-right: none; border-bottom: none; }
        .corner-tr { top: 0; right: 0; border-left: none; border-bottom: none; }
        .corner-bl { bottom: 0; left: 0; border-right: none; border-top: none; }
        .corner-br { bottom: 0; right: 0; border-left: none; border-top: none; }
        
        /* Content area */
        .content {
            padding: 40px;
            height: calc(100vh - 80px);
            box-sizing: border-box;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }
        
        /* Measurement grid */
        .measurement-grid {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            pointer-events: none;
            opacity: 0.2;
        }
        
        .grid-line {
            position: absolute;
            background: #6c757d;
        }
        
        .grid-line.horizontal {
            left: 0;
            right: 0;
            height: 1px;
        }
        
        .grid-line.vertical {
            top: 0;
            bottom: 0;
            width: 1px;
        }
        
        /* Size comparison boxes */
        .size-comparison {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .size-box {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 6px;
            padding: 15px;
            text-align: center;
        }
        
        .size-box.current {
            background: #e7f3ff;
            border-color: #007bff;
            color: #007bff;
            font-weight: bold;
        }
        
        .dimensions-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
        }
        
        .dimensions-table th,
        .dimensions-table td {
            padding: 10px;
            text-align: left;
            border-bottom: 1px solid #dee2e6;
        }
        
        .dimensions-table th {
            background: #f8f9fa;
            font-weight: 600;
        }
        
        .current-size {
            background: #e7f3ff !important;
            color: #007bff;
            font-weight: bold;
        }
        
        @media print {
            body {
                background: white;
            }
            
            .page-container {
                border: 1px solid #000;
            }
            
            .measurement-grid {
                display: none;
            }
            
            .size-indicator {
                background: rgba(0, 123, 255, 0.2);
            }
        }
    </style>
</head>
<body>
    <div class="page-container">
        <!-- Size indicators -->
        <div class="size-indicator size-width">Width: <%= width %></div>
        <div class="size-indicator size-height">Height: <%= height %></div>
        
        <!-- Corner markers -->
        <div class="corner-marker corner-tl"></div>
        <div class="corner-marker corner-tr"></div>
        <div class="corner-marker corner-bl"></div>
        <div class="corner-marker corner-br"></div>
        
        <!-- Measurement grid -->
        <div class="measurement-grid">
            <% 
            // Convert dimensions to pixels for grid (rough approximation)
            const widthPx = width.includes('mm') ? parseInt(width) * 3.78 : parseInt(width) * 72;
            const heightPx = height.includes('mm') ? parseInt(height) * 3.78 : parseInt(height) * 72;
            const gridSpacing = 50; // pixels
            %>
            <% for (let i = 0; i <= Math.ceil(heightPx / gridSpacing); i++) { %>
                <div class="grid-line horizontal" style="top: <%= i * gridSpacing %>px;"></div>
            <% } %>
            <% for (let i = 0; i <= Math.ceil(widthPx / gridSpacing); i++) { %>
                <div class="grid-line vertical" style="left: <%= i * gridSpacing %>px;"></div>
            <% } %>
        </div>
        
        <!-- Content -->
        <div class="content">
            <div>
                <h1><%= title %></h1>
                <p>This page demonstrates custom page size testing with visual guides and dimension validation.</p>
                
                <div style="background: #e7f3ff; border: 1px solid #b3d9ff; border-radius: 6px; padding: 15px; margin: 20px 0;">
                    <h3>Current Page Size</h3>
                    <p><strong>Width:</strong> <%= width %></p>
                    <p><strong>Height:</strong> <%= height %></p>
                    <p><strong>Aspect Ratio:</strong> <%= (parseInt(width) / parseInt(height)).toFixed(2) %></p>
                </div>
                
                <div class="size-comparison">
                    <div class="size-box <%= width === '210mm' && height === '297mm' ? 'current' : '' %>">
                        <strong>A4</strong><br>
                        210mm × 297mm<br>
                        <small>8.27" × 11.69"</small>
                    </div>
                    <div class="size-box <%= width === '297mm' && height === '420mm' ? 'current' : '' %>">
                        <strong>A3</strong><br>
                        297mm × 420mm<br>
                        <small>11.69" × 16.54"</small>
                    </div>
                    <div class="size-box <%= width === '8.5in' && height === '11in' ? 'current' : '' %>">
                        <strong>Letter</strong><br>
                        8.5in × 11in<br>
                        <small>216mm × 279mm</small>
                    </div>
                    <div class="size-box <%= width === '8.5in' && height === '14in' ? 'current' : '' %>">
                        <strong>Legal</strong><br>
                        8.5in × 14in<br>
                        <small>216mm × 356mm</small>
                    </div>
                    <div class="size-box current">
                        <strong>Custom</strong><br>
                        <%= width %> × <%= height %>
                    </div>
                </div>
            </div>
            
            <div>
                <h3>Standard Page Sizes Reference</h3>
                <table class="dimensions-table">
                    <thead>
                        <tr>
                            <th>Format</th>
                            <th>Millimeters</th>
                            <th>Inches</th>
                            <th>Pixels (72 DPI)</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr class="<%= width === '210mm' && height === '297mm' ? 'current-size' : '' %>">
                            <td>A4</td>
                            <td>210 × 297 mm</td>
                            <td>8.27 × 11.69 in</td>
                            <td>595 × 842 px</td>
                        </tr>
                        <tr class="<%= width === '297mm' && height === '420mm' ? 'current-size' : '' %>">
                            <td>A3</td>
                            <td>297 × 420 mm</td>
                            <td>11.69 × 16.54 in</td>
                            <td>842 × 1191 px</td>
                        </tr>
                        <tr class="<%= width === '148mm' && height === '210mm' ? 'current-size' : '' %>">
                            <td>A5</td>
                            <td>148 × 210 mm</td>
                            <td>5.83 × 8.27 in</td>
                            <td>420 × 595 px</td>
                        </tr>
                        <tr class="<%= width === '8.5in' && height === '11in' ? 'current-size' : '' %>">
                            <td>Letter</td>
                            <td>216 × 279 mm</td>
                            <td>8.5 × 11 in</td>
                            <td>612 × 792 px</td>
                        </tr>
                        <tr class="<%= width === '8.5in' && height === '14in' ? 'current-size' : '' %>">
                            <td>Legal</td>
                            <td>216 × 356 mm</td>
                            <td>8.5 × 14 in</td>
                            <td>612 × 1008 px</td>
                        </tr>
                        <tr class="current-size">
                            <td>Custom</td>
                            <td><%= width %> × <%= height %></td>
                            <td>
                                <%= width.includes('mm') ? (parseInt(width) / 25.4).toFixed(2) : width %> × 
                                <%= height.includes('mm') ? (parseInt(height) / 25.4).toFixed(2) : height %>
                                <%= width.includes('mm') ? 'in' : '' %>
                            </td>
                            <td>
                                <%= width.includes('mm') ? Math.round(parseInt(width) * 2.83) : Math.round(parseFloat(width) * 72) %> × 
                                <%= height.includes('mm') ? Math.round(parseInt(height) * 2.83) : Math.round(parseFloat(height) * 72) %> px
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            
            <div>
                <h3>CLI Testing Instructions</h3>
                <div style="background: #f8f9fa; border: 1px solid #dee2e6; border-radius: 4px; padding: 15px;">
                    <p><strong>Current page size command:</strong></p>
                    <code style="background: #e9ecef; padding: 5px; border-radius: 3px;">
                        --page-size "<%= width %>,<%= height %>"
                    </code>
                    
                    <p style="margin-top: 15px;"><strong>Alternative formats:</strong></p>
                    <ul style="font-family: monospace; font-size: 14px;">
                        <li>--format A4</li>
                        <li>--format A3</li>
                        <li>--format Letter</li>
                        <li>--format Legal</li>
                        <li>--custom-size "210mm,297mm"</li>
                        <li>--custom-size "8.5in,11in"</li>
                    </ul>
                </div>
                
                <div style="background: #fff3cd; border: 1px solid #ffeaa7; border-radius: 4px; padding: 15px; margin-top: 15px;">
                    <h4>Expected Behavior</h4>
                    <ul>
                        <li>PDF output should match the specified dimensions exactly</li>
                        <li>Content should fit within the custom page size</li>
                        <li>Corner markers should align with page boundaries</li>
                        <li>Dimension indicators should be accurate</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</body>
</html>